{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/teranyan/workspace/OrangeJuiceWeb/src/templates/home.tsx\";\nimport { useCallback, useState } from 'react';\nimport authState from '~/stores/auth';\nimport { useRecoilValue } from 'recoil';\nimport firebase from '~/modules/firebase';\nimport 'firebase/functions';\nimport dayjs from 'dayjs';\n\nconst Template = () => {\n  const uid = useRecoilValue(authState);\n  const {\n    0: email,\n    1: setEmail\n  } = useState('');\n  const {\n    0: password,\n    1: setPassword\n  } = useState('');\n  const signIn = useCallback(() => {\n    firebase.auth().signInWithEmailAndPassword(email, password);\n  }, [email, password]);\n  const getToken = useCallback(async () => {\n    const res = await firebase.functions(\"asia-northeast1\").httpsCallable(\"http-sessionCookie\")();\n    console.log(res);\n    console.log(dayjs().add(2, 'hour').format());\n    console.log(new Date(dayjs().add(2, 'hour').valueOf()).toUTCString());\n    document.cookie = `HogeHoge=Piyo;Expired=${new Date(dayjs().add(2, 'hour').valueOf()).toUTCString()};HttpOnly`;\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: uid ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: getToken,\n        children: \"get token\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 3\n      }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n        src: \"https://media.orange-juice.app/video/private/XCfWJkbGGvT08umQBaMl5ufL10u2/test.mp3\",\n        controls: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 3\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"mail\",\n        placeholder: \"mail\",\n        onChange: e => setEmail(e.target.value),\n        value: email\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 3\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        placeholder: \"password\",\n        onChange: e => setPassword(e.target.value),\n        value: password\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 3\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: signIn,\n        children: \"signin\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 3\n      }, this)]\n    }, void 0, true)\n  }, void 0, false);\n};\n\nexport default Template;","map":{"version":3,"sources":["/Users/teranyan/workspace/OrangeJuiceWeb/src/templates/home.tsx"],"names":["useCallback","useState","authState","useRecoilValue","firebase","dayjs","Template","uid","email","setEmail","password","setPassword","signIn","auth","signInWithEmailAndPassword","getToken","res","functions","httpsCallable","console","log","add","format","Date","valueOf","toUTCString","document","cookie","e","target","value"],"mappings":";;;AAAA,SAAaA,WAAb,EAA0BC,QAA1B,QAA0C,OAA1C;AACA,OAAOC,SAAP,MAAsB,eAAtB;AACA,SAASC,cAAT,QAA+B,QAA/B;AACA,OAAOC,QAAP,MAAqB,oBAArB;AACA,OAAO,oBAAP;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,QAAY,GAAG,MAAM;AACzB,QAAMC,GAAG,GAAGJ,cAAc,CAACD,SAAD,CAA1B;AACA,QAAM;AAAA,OAACM,KAAD;AAAA,OAAQC;AAAR,MAAoBR,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM;AAAA,OAACS,QAAD;AAAA,OAAWC;AAAX,MAA0BV,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAMW,MAAM,GAAGZ,WAAW,CAAC,MAAI;AAC7BI,IAAAA,QAAQ,CAACS,IAAT,GAAgBC,0BAAhB,CAA2CN,KAA3C,EAAkDE,QAAlD;AACD,GAFyB,EAExB,CAACF,KAAD,EAAQE,QAAR,CAFwB,CAA1B;AAGA,QAAMK,QAAQ,GAAGf,WAAW,CAAC,YAAU;AACrC,UAAMgB,GAAG,GAAG,MAAMZ,QAAQ,CAACa,SAAT,CAAmB,iBAAnB,EAAsCC,aAAtC,CAAoD,oBAApD,GAAlB;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYJ,GAAZ;AACAG,IAAAA,OAAO,CAACC,GAAR,CAAYf,KAAK,GAAGgB,GAAR,CAAY,CAAZ,EAAc,MAAd,EAAsBC,MAAtB,EAAZ;AACAH,IAAAA,OAAO,CAACC,GAAR,CAAY,IAAIG,IAAJ,CAASlB,KAAK,GAAGgB,GAAR,CAAY,CAAZ,EAAc,MAAd,EAAsBG,OAAtB,EAAT,EAA0CC,WAA1C,EAAZ;AACAC,IAAAA,QAAQ,CAACC,MAAT,GAAmB,yBAAwB,IAAIJ,IAAJ,CAASlB,KAAK,GAAGgB,GAAR,CAAY,CAAZ,EAAc,MAAd,EAAsBG,OAAtB,EAAT,EAA0CC,WAA1C,EAAwD,WAAnG;AACD,GAN2B,EAM1B,EAN0B,CAA5B;AAOA,sBAAO;AAAA,cAAGlB,GAAG,gBAAG;AAAA,8BAChB;AAAQ,QAAA,OAAO,EAAEQ,QAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADgB,eAEhB;AAAO,QAAA,GAAG,EAAC,oFAAX;AAAgG,QAAA,QAAQ;AAAxG;AAAA;AAAA;AAAA;AAAA,cAFgB;AAAA,oBAAH,gBAGN;AAAA,8BACP;AAAO,QAAA,IAAI,EAAC,MAAZ;AAAmB,QAAA,WAAW,EAAC,MAA/B;AAAsC,QAAA,QAAQ,EAAEa,CAAC,IAAEnB,QAAQ,CAACmB,CAAC,CAACC,MAAF,CAASC,KAAV,CAA3D;AAA6E,QAAA,KAAK,EAAEtB;AAApF;AAAA;AAAA;AAAA;AAAA,cADO,eAEP;AAAO,QAAA,IAAI,EAAC,UAAZ;AAAuB,QAAA,WAAW,EAAC,UAAnC;AAA8C,QAAA,QAAQ,EAAEoB,CAAC,IAAEjB,WAAW,CAACiB,CAAC,CAACC,MAAF,CAASC,KAAV,CAAtE;AAAwF,QAAA,KAAK,EAAEpB;AAA/F;AAAA;AAAA;AAAA;AAAA,cAFO,eAGP;AAAQ,QAAA,OAAO,EAAEE,MAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAHO;AAAA;AAHA,mBAAP;AAQD,CAtBD;;AAwBA,eAAeN,QAAf","sourcesContent":["import { FC, useCallback, useState } from 'react'\nimport authState from '~/stores/auth'\nimport { useRecoilValue } from 'recoil'\nimport firebase from '~/modules/firebase'\nimport 'firebase/functions'\nimport dayjs from 'dayjs'\n\nconst Template: FC = () => {\n  const uid = useRecoilValue(authState)\n  const [email, setEmail] = useState('')\n  const [password, setPassword] = useState('')\n  const signIn = useCallback(()=>{\n    firebase.auth().signInWithEmailAndPassword(email, password);\n  },[email, password])\n  const getToken = useCallback(async ()=>{\n    const res = await firebase.functions(\"asia-northeast1\").httpsCallable(\"http-sessionCookie\")()\n    console.log(res)\n    console.log(dayjs().add(2,'hour').format())\n    console.log(new Date(dayjs().add(2,'hour').valueOf()).toUTCString())\n    document.cookie = `HogeHoge=Piyo;Expired=${new Date(dayjs().add(2,'hour').valueOf()).toUTCString()};HttpOnly`\n  },[])\n  return <>{uid ? <>\n  <button onClick={getToken}>get token</button>\n  <audio src=\"https://media.orange-juice.app/video/private/XCfWJkbGGvT08umQBaMl5ufL10u2/test.mp3\" controls></audio>\n   </> : <>\n  <input type=\"mail\" placeholder=\"mail\" onChange={e=>setEmail(e.target.value)} value={email}/>\n  <input type=\"password\" placeholder=\"password\" onChange={e=>setPassword(e.target.value)} value={password}/>\n  <button onClick={signIn}>signin</button>\n  </>}</>\n} \n\nexport default Template"]},"metadata":{},"sourceType":"module"}